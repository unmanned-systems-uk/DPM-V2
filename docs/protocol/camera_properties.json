{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DPM Camera Properties",
  "description": "Sony camera property definitions with validation and implementation tracking",
  "version": "1.0.0",

  "property_categories": {
    "exposure": ["shutter_speed", "aperture", "iso", "exposure_compensation", "metering_mode"],
    "focus": ["focus_mode", "focus_area", "manual_focus_position"],
    "white_balance": ["white_balance", "white_balance_temperature", "tint"],
    "file_format": ["file_format", "image_quality", "aspect_ratio"],
    "video": ["video_resolution", "video_framerate", "video_format"],
    "drive_mode": ["drive_mode", "burst_count", "self_timer"],
    "advanced": ["picture_profile", "color_mode", "dynamic_range"]
  },

  "properties": {
    "shutter_speed": {
      "display_name": "Shutter Speed",
      "category": "exposure",
      "description": "Camera shutter speed control",
      "type": "string",
      "validation": {
        "type": "enum",
        "values": ["auto", "1/8000", "1/4000", "1/2000", "1/1000", "1/500", "1/250", "1/125", "1/60", "1/30", "1/15", "1/8", "1/4", "1/2", "1", "2", "4", "8", "15", "30"],
        "default": "auto"
      },
      "sony_sdk": {
        "property_code": "CrDeviceProperty_ShutterSpeed",
        "get_function": "GetDeviceProperty",
        "set_function": "SetDeviceProperty",
        "value_mapping": "ShutterSpeedValue enum",
        "notes": "Must be in Manual or Shutter Priority mode"
      },
      "ui_hints": {
        "control_type": "dropdown",
        "group": "Exposure Triangle",
        "priority": "high"
      },
      "implemented": {
        "air_side": false,
        "ground_side": false,
        "version": "1.1.0",
        "notes": ""
      }
    },

    "aperture": {
      "display_name": "Aperture",
      "category": "exposure",
      "description": "Lens aperture (f-stop) control",
      "type": "string",
      "validation": {
        "type": "enum",
        "values": ["auto", "f/1.4", "f/2", "f/2.8", "f/4", "f/5.6", "f/8", "f/11", "f/16", "f/22"],
        "default": "auto",
        "notes": "Values depend on attached lens"
      },
      "sony_sdk": {
        "property_code": "CrDeviceProperty_FNumber",
        "get_function": "GetDeviceProperty",
        "set_function": "SetDeviceProperty",
        "value_mapping": "FNumberValue enum",
        "notes": "Must query lens capabilities first"
      },
      "ui_hints": {
        "control_type": "dropdown",
        "group": "Exposure Triangle",
        "priority": "high"
      },
      "implemented": {
        "air_side": false,
        "ground_side": false,
        "version": "1.1.0",
        "notes": ""
      }
    },

    "iso": {
      "display_name": "ISO",
      "category": "exposure",
      "description": "Camera ISO sensitivity",
      "type": "integer",
      "validation": {
        "type": "range",
        "min": 100,
        "max": 409600,
        "values": ["auto", 100, 200, 400, 800, 1600, 3200, 6400, 12800, 25600, 51200, 102400],
        "default": "auto",
        "notes": "Extended ISO may require specific camera mode"
      },
      "sony_sdk": {
        "property_code": "CrDeviceProperty_IsoSensitivity",
        "get_function": "GetDeviceProperty",
        "set_function": "SetDeviceProperty",
        "value_mapping": "ISO value direct mapping",
        "notes": "Auto ISO uses special value 0xFFFFFFFF"
      },
      "ui_hints": {
        "control_type": "dropdown",
        "group": "Exposure Triangle",
        "priority": "high"
      },
      "implemented": {
        "air_side": false,
        "ground_side": false,
        "version": "1.1.0",
        "notes": ""
      }
    },

    "white_balance": {
      "display_name": "White Balance",
      "category": "white_balance",
      "description": "Color temperature preset",
      "type": "string",
      "validation": {
        "type": "enum",
        "values": ["auto", "daylight", "shade", "cloudy", "tungsten", "fluorescent_warm", "fluorescent_cool", "fluorescent_day", "fluorescent_daylight", "flash", "underwater", "custom", "temperature"],
        "default": "auto"
      },
      "sony_sdk": {
        "property_code": "CrDeviceProperty_WhiteBalance",
        "get_function": "GetDeviceProperty",
        "set_function": "SetDeviceProperty",
        "value_mapping": "WhiteBalanceValue enum",
        "notes": "Use white_balance_temperature for manual K value"
      },
      "ui_hints": {
        "control_type": "dropdown",
        "group": "Color",
        "priority": "medium"
      },
      "implemented": {
        "air_side": false,
        "ground_side": false,
        "version": "1.0.0",
        "notes": "Phase 1 requirement"
      }
    },

    "white_balance_temperature": {
      "display_name": "White Balance Temperature",
      "category": "white_balance",
      "description": "Manual color temperature in Kelvin",
      "type": "integer",
      "validation": {
        "type": "range",
        "min": 2500,
        "max": 9900,
        "step": 100,
        "default": 5500,
        "notes": "Only valid when white_balance is 'temperature'"
      },
      "sony_sdk": {
        "property_code": "CrDeviceProperty_ColorTemperature",
        "get_function": "GetDeviceProperty",
        "set_function": "SetDeviceProperty",
        "value_mapping": "Direct Kelvin value",
        "notes": "Must set white_balance to 'temperature' first"
      },
      "ui_hints": {
        "control_type": "slider",
        "group": "Color",
        "priority": "low",
        "enabled_when": "white_balance == 'temperature'"
      },
      "implemented": {
        "air_side": false,
        "ground_side": false,
        "version": "1.0.0",
        "notes": "Phase 1 requirement"
      }
    },

    "focus_mode": {
      "display_name": "Focus Mode",
      "category": "focus",
      "description": "Autofocus or manual focus mode",
      "type": "string",
      "validation": {
        "type": "enum",
        "values": ["af_s", "af_c", "af_a", "dmf", "manual"],
        "default": "af_s",
        "notes": "af_s=Single, af_c=Continuous, af_a=Auto, dmf=Direct Manual"
      },
      "sony_sdk": {
        "property_code": "CrDeviceProperty_FocusMode",
        "get_function": "GetDeviceProperty",
        "set_function": "SetDeviceProperty",
        "value_mapping": "FocusModeValue enum",
        "notes": "Some modes may not be available in all shooting modes"
      },
      "ui_hints": {
        "control_type": "segmented_control",
        "group": "Focus",
        "priority": "high"
      },
      "implemented": {
        "air_side": false,
        "ground_side": false,
        "version": "1.0.0",
        "notes": "Phase 1 requirement"
      }
    },

    "file_format": {
      "display_name": "File Format",
      "category": "file_format",
      "description": "Image file format",
      "type": "string",
      "validation": {
        "type": "enum",
        "values": ["jpeg", "raw", "jpeg_raw"],
        "default": "jpeg",
        "notes": "RAW format depends on camera model"
      },
      "sony_sdk": {
        "property_code": "CrDeviceProperty_FileType",
        "get_function": "GetDeviceProperty",
        "set_function": "SetDeviceProperty",
        "value_mapping": "FileTypeValue enum",
        "notes": "Some combinations may require specific mode dial position"
      },
      "ui_hints": {
        "control_type": "segmented_control",
        "group": "Recording",
        "priority": "medium"
      },
      "implemented": {
        "air_side": false,
        "ground_side": false,
        "version": "1.0.0",
        "notes": "Phase 1 requirement"
      }
    },

    "drive_mode": {
      "display_name": "Drive Mode",
      "category": "drive_mode",
      "description": "Single shot, continuous, bracket, etc.",
      "type": "string",
      "validation": {
        "type": "enum",
        "values": ["single", "continuous_lo", "continuous_hi", "self_timer_10s", "self_timer_2s", "bracket"],
        "default": "single"
      },
      "sony_sdk": {
        "property_code": "CrDeviceProperty_DriveMode",
        "get_function": "GetDeviceProperty",
        "set_function": "SetDeviceProperty",
        "value_mapping": "DriveModeValue enum",
        "notes": "Continuous modes affected by buffer and card speed"
      },
      "ui_hints": {
        "control_type": "dropdown",
        "group": "Capture",
        "priority": "medium"
      },
      "implemented": {
        "air_side": false,
        "ground_side": false,
        "version": "1.0.0",
        "notes": "Phase 1 requirement"
      }
    },

    "picture_profile": {
      "display_name": "Picture Profile",
      "category": "advanced",
      "description": "Color and tone profile preset",
      "type": "string",
      "validation": {
        "type": "enum",
        "values": ["off", "pp1", "pp2", "pp3", "pp4", "pp5", "pp6", "pp7", "pp8", "pp9", "pp10"],
        "default": "off",
        "notes": "Only available on certain camera models (e.g., A7 series)"
      },
      "sony_sdk": {
        "property_code": "CrDeviceProperty_PictureProfile",
        "get_function": "GetDeviceProperty",
        "set_function": "SetDeviceProperty",
        "value_mapping": "PictureProfileValue enum",
        "notes": "Feature availability varies by camera model"
      },
      "ui_hints": {
        "control_type": "dropdown",
        "group": "Advanced",
        "priority": "low",
        "requires_camera_features": ["picture_profiles"]
      },
      "implemented": {
        "air_side": false,
        "ground_side": false,
        "version": "2.0.0",
        "notes": "Deferred to Phase 3 per project plan"
      }
    },

    "exposure_compensation": {
      "display_name": "Exposure Compensation",
      "category": "exposure",
      "description": "Exposure adjustment in stops",
      "type": "number",
      "validation": {
        "type": "range",
        "min": -5.0,
        "max": 5.0,
        "step": 0.3,
        "default": 0.0,
        "notes": "Increments typically in 1/3 stops"
      },
      "sony_sdk": {
        "property_code": "CrDeviceProperty_ExposureBiasCompensation",
        "get_function": "GetDeviceProperty",
        "set_function": "SetDeviceProperty",
        "value_mapping": "Fixed point: value * 1000 (e.g., +1.0 = 1000)",
        "notes": "Not available in Manual (M) mode"
      },
      "ui_hints": {
        "control_type": "slider",
        "group": "Exposure",
        "priority": "medium"
      },
      "implemented": {
        "air_side": false,
        "ground_side": false,
        "version": "1.1.0",
        "notes": ""
      }
    }
  },

  "property_dependencies": {
    "white_balance_temperature": {
      "requires": {
        "white_balance": "temperature"
      },
      "description": "Temperature slider only active when WB mode is manual"
    },
    "burst_count": {
      "requires": {
        "drive_mode": ["continuous_lo", "continuous_hi", "bracket"]
      },
      "description": "Burst count only relevant in continuous modes"
    }
  },

  "camera_mode_restrictions": {
    "manual_mode": {
      "allowed": ["shutter_speed", "aperture", "iso", "white_balance", "focus_mode", "file_format"],
      "disabled": ["exposure_compensation"],
      "notes": "Full manual control, no auto exposure compensation"
    },
    "aperture_priority": {
      "allowed": ["aperture", "iso", "exposure_compensation", "white_balance", "focus_mode"],
      "auto": ["shutter_speed"],
      "notes": "Camera controls shutter speed automatically"
    },
    "shutter_priority": {
      "allowed": ["shutter_speed", "iso", "exposure_compensation", "white_balance", "focus_mode"],
      "auto": ["aperture"],
      "notes": "Camera controls aperture automatically"
    },
    "program_auto": {
      "allowed": ["exposure_compensation", "white_balance", "focus_mode", "file_format"],
      "auto": ["shutter_speed", "aperture", "iso"],
      "notes": "Camera controls exposure triangle"
    }
  },

  "implementation_phases": {
    "phase_1": {
      "properties": [
        "shutter_speed",
        "aperture",
        "iso",
        "white_balance",
        "white_balance_temperature",
        "focus_mode",
        "file_format",
        "drive_mode"
      ],
      "target": "Week 3-10"
    },
    "phase_2": {
      "properties": [
        "exposure_compensation",
        "metering_mode",
        "image_quality",
        "video_resolution",
        "video_framerate"
      ],
      "target": "Week 11-15"
    },
    "phase_3": {
      "properties": [
        "picture_profile",
        "color_mode",
        "dynamic_range"
      ],
      "target": "Post Phase 1"
    }
  }
}
