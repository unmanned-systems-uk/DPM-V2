{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DPM Command Definitions",
  "description": "Detailed command specifications for DPM Protocol v1.0",
  "version": "1.0.0",

  "commands": {
    "camera.capture": {
      "description": "Trigger camera shutter release",
      "parameters": {
        "mode": {
          "type": "string",
          "enum": ["single", "burst"],
          "default": "single",
          "required": false
        },
        "burst_count": {
          "type": "integer",
          "minimum": 1,
          "maximum": 999,
          "required": false,
          "description": "Number of images in burst mode"
        }
      },
      "response": {
        "success": {
          "status": "captured",
          "message": "Shutter released successfully",
          "image_id": "string (optional)",
          "timestamp": "integer (optional)"
        },
        "errors": [1000, 1006]
      },
      "implemented": {
        "air_side": true,
        "ground_side": true,
        "version": "1.0.0"
      }
    },

    "camera.set_property": {
      "description": "Set camera property value",
      "parameters": {
        "property": {
          "type": "string",
          "enum": ["shutter_speed", "aperture", "iso", "white_balance", "focus_mode", "file_format"],
          "required": true
        },
        "value": {
          "type": "any",
          "required": true,
          "description": "Property-specific value"
        }
      },
      "response": {
        "success": {
          "property": "string",
          "value": "any",
          "confirmed": "boolean"
        },
        "errors": [1000, 1002, 1005]
      },
      "implemented": {
        "air_side": true,
        "ground_side": true,
        "version": "1.1.0"
      }
    },

    "camera.get_properties": {
      "description": "Get current camera property values",
      "parameters": {
        "properties": {
          "type": "array",
          "items": "string",
          "required": true
        }
      },
      "response": {
        "success": {
          "properties": "object"
        },
        "errors": [1000]
      },
      "implemented": {
        "air_side": true,
        "ground_side": true,
        "version": "1.1.0"
      }
    },

    "camera.focus": {
      "description": "Control manual focus operation (near/far/stop)",
      "parameters": {
        "action": {
          "type": "string",
          "enum": ["near", "far", "stop"],
          "required": true,
          "description": "Focus action: 'near' focuses closer, 'far' focuses further, 'stop' stops focus movement"
        },
        "speed": {
          "type": "integer",
          "minimum": 1,
          "maximum": 3,
          "default": 3,
          "required": false,
          "description": "Focus speed (1=slow, 2=medium, 3=fast). Only applicable when action is 'near' or 'far'"
        }
      },
      "response": {
        "success": {
          "action": "string",
          "speed": "integer",
          "focus_distance_m": "float | 'infinity' (optional - focal distance in meters)"
        },
        "errors": [1000, 3001, 3002, 3003, 3004]
      },
      "notes": [
        "Camera must be in manual focus mode (focus_mode='manual') for this command to work",
        "Use 'stop' action to halt focus movement initiated by 'near' or 'far'",
        "Speed parameter maps to Sony SDK speeds: 1=slow (1-2), 2=medium (3-4), 3=fast (5-7)"
      ],
      "implemented": {
        "air_side": true,
        "ground_side": false,
        "version": "1.2.0"
      }
    },

    "camera.auto_focus_hold": {
      "description": "Trigger auto-focus hold (equivalent to AF-ON button)",
      "parameters": {
        "state": {
          "type": "string",
          "enum": ["press", "release"],
          "required": true,
          "description": "Button state: 'press' to engage AF, 'release' to stop"
        }
      },
      "response": {
        "success": {
          "state": "string",
          "focus_locked": "boolean (optional)"
        },
        "errors": [1000, 3005, 3006]
      },
      "notes": [
        "Simulates half-press shutter or AF-ON button",
        "Camera will attempt to auto-focus when state='press'",
        "Does not require manual focus mode - works in AF-S, AF-C modes"
      ],
      "implemented": {
        "air_side": true,
        "ground_side": false,
        "version": "1.2.0"
      }
    },

    "system.get_status": {
      "description": "Get system status information",
      "parameters": {},
      "response": {
        "success": {
          "uptime_seconds": "integer",
          "cpu_usage_percent": "float",
          "memory_usage_percent": "float",
          "storage_free_gb": "float"
        },
        "errors": [5004]
      },
      "implemented": {
        "air_side": true,
        "ground_side": true,
        "version": "1.0.0"
      }
    }
  }
}
